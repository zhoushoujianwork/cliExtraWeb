{
  "project_name": "cliExtra", 
  "name": "智能协作开发流程", 
  "repository": "https://github.com/zhoushoujianwork/cliExtra.git", 
  "collaboration_rules": [
    {
      "priority": "high", 
      "to_role": "frontend-engineer", 
      "from_role": "devops-engineer", 
      "trigger": "CLI功能更新", 
      "trigger_conditions": {
        "code_committed": true,
        "tests_passed": true,
        "api_changed": true,
        "documentation_updated": true
      },
      "message_template": "CLI功能已更新，API版本{v1.2}，请适配Web界面", 
      "auto_execute": true, 
      "action": "通知Web界面适配",
      "required_actions": [
        "update_api_specs",
        "trigger_web_tests", 
        "notify_frontend_team"
      ],
      "id": "collab-1"
    },
    {
      "priority": "medium",
      "to_role": "devops-engineer",
      "from_role": "frontend-engineer", 
      "trigger": "Web界面完成",
      "trigger_conditions": {
        "ui_completed": true,
        "user_tests_passed": true,
        "integration_ready": true
      },
      "message_template": "Web界面开发完成，请进行集成测试",
      "auto_execute": true,
      "action": "启动集成测试",
      "required_actions": [
        "run_integration_tests",
        "deploy_staging",
        "performance_test"
      ],
      "id": "collab-2"
    }
  ], 
  "created_at": "2025-07-23T13:23:23.700675", 
  "created_by": "system", 
  "updated_at": "2025-07-23T13:23:23.701331", 
  "state_transitions": {
    "pending": ["in_progress", "blocked"],
    "in_progress": ["completed", "failed", "blocked", "review_needed"],
    "completed": ["verified", "failed"],
    "failed": ["retry", "escalate", "rollback"],
    "blocked": ["in_progress", "escalate"],
    "verified": ["deployed", "failed"],
    "deployed": ["monitoring", "failed"]
  },
  "edges": [
    {
      "style": {
        "color": "#6b7280", 
        "width": 2
      }, 
      "source_handle": "output", 
      "label": "项目启动", 
      "target_node_id": "task-1", 
      "source_node_id": "start-1", 
      "target_handle": "input", 
      "id": "edge-1",
      "trigger_conditions": {
        "type": "manual",
        "required_inputs": ["project_requirements", "team_availability"],
        "validation_rules": ["requirements_complete", "team_ready"]
      }
    }, 
    {
      "style": {
        "color": "#6b7280", 
        "width": 2
      }, 
      "source_handle": "output", 
      "label": "需求确认", 
      "target_node_id": "task-2", 
      "source_node_id": "task-1", 
      "target_handle": "input", 
      "id": "edge-2",
      "trigger_conditions": {
        "type": "automatic",
        "required_deliverables": ["需求文档", "技术方案"],
        "quality_gates": ["review_approved", "stakeholder_signed"]
      }
    }, 
    {
      "style": {
        "color": "#6b7280", 
        "width": 2
      }, 
      "source_handle": "output", 
      "label": "设计完成", 
      "target_node_id": "parallel-1", 
      "source_node_id": "task-2", 
      "target_handle": "input", 
      "id": "edge-3",
      "trigger_conditions": {
        "type": "automatic",
        "required_deliverables": ["架构文档", "接口规范"],
        "quality_gates": ["architecture_review_passed", "api_spec_approved"]
      }
    }, 
    {
      "style": {
        "color": "#3b82f6", 
        "width": 2
      }, 
      "source_handle": "output", 
      "label": "CLI分支", 
      "target_node_id": "task-3", 
      "source_node_id": "parallel-1", 
      "target_handle": "input", 
      "id": "edge-4",
      "trigger_conditions": {
        "type": "automatic",
        "required_deliverables": ["技术设计完成"],
        "dependencies": ["task-2-completed"]
      }
    }, 
    {
      "style": {
        "color": "#10b981", 
        "width": 2
      }, 
      "source_handle": "output", 
      "label": "Web分支", 
      "target_node_id": "task-4", 
      "source_node_id": "parallel-1", 
      "target_handle": "input", 
      "id": "edge-5",
      "trigger_conditions": {
        "type": "automatic",
        "required_deliverables": ["技术设计完成"],
        "dependencies": ["task-2-completed"]
      }
    }, 
    {
      "style": {
        "color": "#6b7280", 
        "width": 2
      }, 
      "source_handle": "output", 
      "label": "CLI完成", 
      "target_node_id": "task-5", 
      "source_node_id": "task-3", 
      "target_handle": "input", 
      "id": "edge-6",
      "trigger_conditions": {
        "type": "automatic",
        "required_deliverables": ["CLI工具", "测试报告", "使用文档"],
        "quality_gates": ["unit_tests_passed", "integration_tests_passed", "code_review_approved"]
      }
    }, 
    {
      "style": {
        "color": "#6b7280", 
        "width": 2
      }, 
      "source_handle": "output", 
      "label": "Web完成", 
      "target_node_id": "task-5", 
      "source_node_id": "task-4", 
      "target_handle": "input", 
      "id": "edge-7",
      "trigger_conditions": {
        "type": "automatic",
        "required_deliverables": ["Web界面", "用户手册"],
        "quality_gates": ["ui_tests_passed", "accessibility_compliant", "code_review_approved"]
      }
    }, 
    {
      "style": {
        "color": "#6b7280", 
        "width": 2
      }, 
      "source_handle": "output", 
      "label": "集成完成", 
      "target_node_id": "end-1", 
      "source_node_id": "task-5", 
      "target_handle": "input", 
      "id": "edge-8",
      "trigger_conditions": {
        "type": "automatic",
        "required_deliverables": ["测试报告", "修复记录"],
        "quality_gates": ["end_to_end_tests_passed", "performance_benchmarks_met", "security_scan_clean"],
        "dependencies": ["task-3-completed", "task-4-completed"]
      }
    }
  ], 
  "notifications": {
    "auto_notify": true, 
    "channels": [
      "cliExtra_send", 
      "cliExtra_broadcast"
    ],
    "notification_rules": [
      {
        "event": "task_completed",
        "recipients": ["task_owner", "next_task_owner"],
        "template": "任务 {task_name} 已完成，可开始 {next_task_name}"
      },
      {
        "event": "quality_gate_failed", 
        "recipients": ["task_owner", "project_manager"],
        "template": "质量门禁失败：{task_name} - {failure_reason}"
      },
      {
        "event": "collaboration_triggered",
        "recipients": ["target_role"],
        "template": "协作触发：{trigger_message}"
      }
    ]
  }, 
  "version": "2.0.0", 
  "canvas_config": {
    "width": 1200, 
    "pan_x": 0, 
    "zoom": 1.0, 
    "pan_y": 0, 
    "height": 800
  }, 
  "roles": [
    {
      "responsibilities": [
        "Shell脚本开发", 
        "系统管理", 
        "自动化运维",
        "CI/CD流程",
        "性能优化"
      ], 
      "tools": [
        "git", 
        "shell", 
        "tmux", 
        "bash",
        "docker",
        "jenkins"
      ], 
      "name": "devops-engineer", 
      "description": "运维工程师 - Shell脚本开发和系统管理",
      "permissions": ["deploy", "test", "monitor"],
      "escalation_path": "project_manager"
    }, 
    {
      "responsibilities": [
        "Web界面开发", 
        "用户体验设计", 
        "API集成",
        "前端测试",
        "性能优化"
      ], 
      "tools": [
        "git", 
        "flask", 
        "javascript", 
        "html", 
        "css", 
        "python",
        "jest",
        "cypress"
      ], 
      "name": "frontend-engineer", 
      "description": "前端工程师 - Web界面开发",
      "permissions": ["develop", "test", "deploy_frontend"],
      "escalation_path": "project_manager"
    }
  ], 
  "project_description": "基于tmux的Amazon Q CLI实例管理系统", 
  "nodes": [
    {
      "status": "pending", 
      "style": {
        "width": 150, 
        "border_color": "#059669", 
        "text_color": "#ffffff", 
        "background_color": "#10b981", 
        "height": 60
      }, 
      "name": "开始", 
      "owner": "any", 
      "position": {
        "y": 200, 
        "x": 100
      }, 
      "type": "start", 
      "id": "start-1", 
      "description": "工作流开始",
      "completion_criteria": {
        "manual_trigger": true,
        "required_inputs": ["project_requirements"]
      }
    }, 
    {
      "deliverables": [
        "需求文档", 
        "技术方案"
      ], 
      "status": "pending", 
      "style": {
        "width": 150, 
        "border_color": "#2563eb", 
        "text_color": "#ffffff", 
        "background_color": "#3b82f6", 
        "height": 60
      }, 
      "name": "需求分析", 
      "owner": "any", 
      "position": {
        "y": 200, 
        "x": 300
      }, 
      "type": "task", 
      "id": "task-1", 
      "responsibilities": [
        "需求收集", 
        "可行性分析", 
        "技术调研"
      ], 
      "description": "分析用户需求和技术可行性",
      "completion_criteria": {
        "deliverables_ready": ["需求文档", "技术方案"],
        "quality_gates": ["review_approved", "stakeholder_signed"],
        "estimated_duration": "3-5天",
        "success_metrics": ["requirements_clarity", "technical_feasibility"]
      },
      "error_handling": {
        "retry_count": 2,
        "escalation_trigger": "requirements_unclear",
        "fallback_action": "schedule_workshop"
      }
    }, 
    {
      "deliverables": [
        "架构文档", 
        "接口规范"
      ], 
      "status": "pending", 
      "style": {
        "width": 150, 
        "border_color": "#2563eb", 
        "text_color": "#ffffff", 
        "background_color": "#3b82f6", 
        "height": 60
      }, 
      "name": "技术设计", 
      "owner": "devops-engineer", 
      "position": {
        "y": 200, 
        "x": 500
      }, 
      "type": "task", 
      "id": "task-2", 
      "responsibilities": [
        "架构设计", 
        "技术选型", 
        "接口设计"
      ], 
      "description": "设计系统架构和技术方案",
      "completion_criteria": {
        "deliverables_ready": ["架构文档", "接口规范"],
        "quality_gates": ["architecture_review_passed", "api_spec_approved"],
        "estimated_duration": "5-7天",
        "success_metrics": ["architecture_soundness", "api_completeness"]
      },
      "error_handling": {
        "retry_count": 1,
        "escalation_trigger": "architecture_complexity",
        "fallback_action": "consult_architect"
      }
    }, 
    {
      "status": "pending", 
      "style": {
        "width": 150, 
        "border_color": "#d97706", 
        "text_color": "#ffffff", 
        "background_color": "#f59e0b", 
        "height": 60
      }, 
      "name": "并行开发", 
      "owner": "devops-engineer", 
      "position": {
        "y": 200, 
        "x": 700
      }, 
      "type": "decision", 
      "id": "parallel-1", 
      "description": "CLI和Web界面并行开发",
      "completion_criteria": {
        "dependencies_satisfied": ["task-2-completed"],
        "parallel_tasks_ready": ["task-3-ready", "task-4-ready"]
      }
    }, 
    {
      "deliverables": [
        "CLI工具", 
        "测试报告", 
        "使用文档"
      ], 
      "status": "pending", 
      "style": {
        "width": 150, 
        "border_color": "#2563eb", 
        "text_color": "#ffffff", 
        "background_color": "#3b82f6", 
        "height": 60
      }, 
      "name": "CLI开发", 
      "owner": "devops-engineer", 
      "position": {
        "y": 100, 
        "x": 600
      }, 
      "type": "task", 
      "id": "task-3", 
      "responsibilities": [
        "Shell脚本开发", 
        "功能测试", 
        "文档更新"
      ], 
      "description": "开发和测试CLI功能",
      "completion_criteria": {
        "deliverables_ready": ["CLI工具", "测试报告", "使用文档"],
        "quality_gates": ["unit_tests_passed", "integration_tests_passed", "code_review_approved"],
        "estimated_duration": "10-15天",
        "success_metrics": ["functionality_complete", "test_coverage_90%", "documentation_quality"]
      },
      "error_handling": {
        "retry_count": 3,
        "escalation_trigger": "critical_bug",
        "fallback_action": "pair_programming"
      },
      "collaboration_triggers": [
        {
          "event": "api_changed",
          "target_role": "frontend-engineer",
          "message": "CLI API已更新，请同步Web界面"
        }
      ]
    }, 
    {
      "deliverables": [
        "Web界面", 
        "用户手册"
      ], 
      "status": "pending", 
      "style": {
        "width": 150, 
        "border_color": "#2563eb", 
        "text_color": "#ffffff", 
        "background_color": "#3b82f6", 
        "height": 60
      }, 
      "name": "Web界面开发", 
      "owner": "frontend-engineer", 
      "position": {
        "y": 300, 
        "x": 600
      }, 
      "type": "task", 
      "id": "task-4", 
      "responsibilities": [
        "前端开发", 
        "用户体验", 
        "API集成"
      ], 
      "description": "开发Web管理界面",
      "completion_criteria": {
        "deliverables_ready": ["Web界面", "用户手册"],
        "quality_gates": ["ui_tests_passed", "accessibility_compliant", "code_review_approved"],
        "estimated_duration": "12-18天",
        "success_metrics": ["ui_completeness", "user_experience", "accessibility_score"]
      },
      "error_handling": {
        "retry_count": 2,
        "escalation_trigger": "ui_complexity",
        "fallback_action": "ui_review_session"
      },
      "collaboration_triggers": [
        {
          "event": "ui_completed",
          "target_role": "devops-engineer",
          "message": "Web界面开发完成，请进行集成测试"
        }
      ]
    }, 
    {
      "deliverables": [
        "测试报告", 
        "修复记录"
      ], 
      "status": "pending", 
      "style": {
        "width": 150, 
        "border_color": "#2563eb", 
        "text_color": "#ffffff", 
        "background_color": "#3b82f6", 
        "height": 60
      }, 
      "name": "集成测试", 
      "owner": "both", 
      "position": {
        "y": 200, 
        "x": 800
      }, 
      "type": "task", 
      "id": "task-5", 
      "responsibilities": [
        "集成测试", 
        "Bug修复", 
        "性能优化"
      ], 
      "description": "测试CLI和Web功能集成",
      "completion_criteria": {
        "deliverables_ready": ["测试报告", "修复记录"],
        "quality_gates": ["end_to_end_tests_passed", "performance_benchmarks_met", "security_scan_clean"],
        "dependencies": ["task-3-completed", "task-4-completed"],
        "estimated_duration": "5-7天",
        "success_metrics": ["integration_success", "performance_targets", "security_compliance"]
      },
      "error_handling": {
        "retry_count": 2,
        "escalation_trigger": "integration_failure",
        "fallback_action": "debug_session"
      }
    }, 
    {
      "status": "pending", 
      "style": {
        "width": 150, 
        "border_color": "#dc2626", 
        "text_color": "#ffffff", 
        "background_color": "#ef4444", 
        "height": 60
      }, 
      "name": "结束", 
      "owner": "any", 
      "position": {
        "y": 200, 
        "x": 1000
      }, 
      "type": "end", 
      "id": "end-1", 
      "description": "工作流结束",
      "completion_criteria": {
        "all_tasks_completed": true,
        "final_approval": true
      }
    }
  ], 
  "id": "default-workflow-1", 
  "description": "智能协作软件开发工作流程",
  "ai_guidance": {
    "workflow_rules": [
      "检查任务完成条件后再触发下一步",
      "质量门禁失败时自动通知相关人员",
      "协作触发时确保所有必要条件满足",
      "错误处理时遵循定义的升级路径"
    ],
    "decision_points": [
      "并行任务启动前确认依赖关系",
      "集成测试前确认两个分支都完成",
      "质量门禁失败时决定重试或升级"
    ]
  }
}