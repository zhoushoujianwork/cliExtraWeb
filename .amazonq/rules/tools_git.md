# Git 工具能力

## 自动提交功能

当完成某个完整功能开发后，我会自动执行 Git 提交操作，遵循以下规范：

### 提交时机
- ✅ 功能开发完成
- ✅ 代码语法检查通过
- ✅ 功能测试验证成功
- ✅ 相关文档已更新

### 提交流程

#### 1. 代码检查
```bash
# 检查修改的文件
git status

# 查看具体变更
git diff
```

#### 2. 添加文件到暂存区
```bash
# 添加相关的修改文件
git add <modified_files>

# 不添加不相关的文件或临时文件
```

#### 3. 执行提交
```bash
# 使用规范的提交信息格式
git commit -m "类型：简短描述

## 详细说明
- 具体实现的功能
- 解决的问题
- 技术要点

## 测试验证
- 测试场景
- 验证结果

## 影响范围
- 影响的模块
- 兼容性说明"
```

### 提交信息规范

#### 提交类型
- `功能增强`: 新增功能或功能改进
- `修复`: Bug 修复
- `重构`: 代码重构，不改变功能
- `文档`: 文档更新
- `测试`: 测试相关改动
- `配置`: 配置文件修改
- `性能`: 性能优化

#### 提交信息结构
```
类型：简短描述（50字符以内）

## 详细说明
- 功能描述
- 实现方式
- 技术细节

## 测试验证
- 测试用例
- 验证结果
- 边界情况

## 用户价值
- 解决的问题
- 带来的改进
- 使用示例

## 技术实现
- 核心逻辑
- 关键算法
- 设计考虑
```

### 文档更新检查

在提交前，我会检查并更新以下文档：

#### 必须检查的文件
- `README.md`: 主要功能说明
- `AmazonQ.md`: 开发记录
- 相关的 `.md` 文档文件

#### 更新内容
- 新功能的使用说明
- 命令示例和参数说明
- 配置选项和最佳实践
- 故障排除和常见问题

### 提交限制

#### 不执行的操作
- ❌ 不执行 `git push` 操作
- ❌ 不创建或切换分支
- ❌ 不执行 merge 操作
- ❌ 不修改 Git 配置

#### 只在以下情况提交
- ✅ 当前在非主分支（非 main/master）
- ✅ 功能完整且经过测试
- ✅ 没有语法错误或明显问题
- ✅ 相关文档已同步更新

### 提交示例

#### 功能增强示例
```bash
git commit -m "功能增强：为 list 命令添加 namespace 过滤支持

## 新增功能
- 添加 -n, --namespace 参数
- 支持按 namespace 过滤实例列表
- JSON 输出包含过滤信息

## 使用示例
\`\`\`bash
qq list -n frontend
qq list --namespace backend -o json
\`\`\`

## 测试验证
- ✅ 基本过滤功能正常
- ✅ JSON 输出格式正确
- ✅ 向后兼容性保持

## 用户价值
- 提高大量实例环境下的管理效率
- 支持按项目或环境分类查看
- 便于自动化脚本处理"
```

#### 修复示例
```bash
git commit -m "修复：clean-all 命令现在能正确清理所有实例

## 问题描述
clean-all 只能清理运行中的实例，已停止的实例无法清理

## 解决方案
- 扩展实例发现逻辑，支持多种来源
- 添加去重机制，避免重复处理
- 增强状态显示，区分运行和停止状态

## 测试验证
- ✅ 能发现并清理已停止的实例
- ✅ 正确处理运行中的实例
- ✅ 向后兼容旧目录结构

## 用户影响
- 修复了清理不完整的问题
- 提高了系统整洁性
- 增强了预览功能"
```

### 自动化执行

当我识别到功能开发完成时，会自动：

1. **检查代码状态**
   ```bash
   git status
   ```

2. **添加相关文件**
   ```bash
   git add <relevant_files>
   ```

3. **生成提交信息**
   - 根据功能类型选择合适的提交类型
   - 生成详细的提交描述
   - 包含测试验证和用户价值说明

4. **执行提交**
   ```bash
   git commit -m "<generated_commit_message>"
   ```

5. **确认结果**
   - 显示提交成功信息
   - 提醒用户后续的 push 操作

### 注意事项

- **安全第一**: 只提交经过验证的代码
- **信息完整**: 提交信息包含足够的上下文
- **文档同步**: 确保文档与代码变更保持一致
- **用户控制**: 用户保留 push 和分支管理的控制权

---

**重要**: 我会在每次功能完成后主动执行提交操作，确保代码变更得到及时记录和版本控制。
